(function(e){e.html5audio=function($a,c,ab){function xa(){if(S){var a=b.find(".fontMeasure");j=new apTextScroller;j.init(a,ga,bb,"left",c.scrollSeparator,c.scrollSpeed)}}function T(){q&&(E.css("display","none"),r.unbind("mousemove",ya),r.unbind("mouseout",T),m.unbind("mouseout",T))}function ya(a){a=a.pageX-U.offset().left;0>a?a=0:a>F&&(a=F);var b=a+parseInt(r.css("left"),10)+parseInt(cb.css("left"),10)+parseInt(U.css("left"),10)-E.width()/2;E.css("left",b+"px");a=Math.max(0,Math.min(1,a/F));a=parseInt(100* a,10);ha.html(a+" %");a=E.width()/2-ha.width()/2;ha.css("left",a+"px")}function V(a){k=Math.max(0,Math.min(1,(a.pageX-U.offset().left)/F));L()}function za(){m.unbind("mousemove",V);m.unbind("mouseup touchend MozTouchUp",za);r.unbind("mouseup",V);return ia=!1}function L(){Aa.css("width",k*F+"px");soundManager.setVolume(s,100*k);0<k?b.find(".player_volume").find("img").attr("src",Ba):b.find(".player_volume").find("img").attr("src",Ca)}function W(){q&&(G.css("display","none"),n.unbind("mousemove",Da), n.unbind("mouseout",W),m.unbind("mouseout",W))}function Da(a){a=a.pageX-n.offset().left;0>a?a=0:a>x&&(a=x);var b=a+parseInt(n.css("left"),10)-G.width()/2;G.css("left",b+"px");a=Math.max(0,Math.min(1,a/x))*parseInt(t.bytesLoaded/t.bytesTotal*(t.duration/1E3));isNaN(a)||(ja.html(Ea(a)+db+Fa(t.duration/1E3)),a=G.width()/2-ja.width()/2,ja.css("left",a+"px"))}function X(a){A=a.pageX-Ga.offset().left;0>A?A=0:A>x&&(A=x);Y.css("width",A+"px");a=Math.max(0,Math.min(1,A/x));soundManager.setPosition(s,a*parseInt(t.bytesLoaded/ t.bytesTotal*t.duration))}function Ha(){m.unbind("mousemove",X);m.unbind("mouseup touchend MozTouchUp",Ha);n.unbind("mouseup",X);return seekbarDown=!1}function y(){if(i.getLastInOrder())Ia();else{var a=i.getCounter();Ia();var e=H[a];j&&S?(j.deactivate(),j.input(e),j.activate()):ga.html(e);Z=ka[a];la();ma=!1;t=$?soundManager.createSound({id:s,url:Z,autoLoad:!0,autoPlay:B,volume:100*k,whileloading:Ja,whileplaying:Ka,onfinish:La,onload:Ma,onsuspend:Na}):soundManager.createSound({id:s,url:[Z+".mp3",Z+ ".ogg"],autoLoad:!0,autoPlay:B,volume:100*k,whileloading:Ja,whileplaying:Ka,onfinish:La,onload:Ma,onsuspend:Na});B?(l=!0,b.find(".controls_toggle").find("img").attr("src",aa)):(l=!1,b.find(".controls_toggle").find("img").attr("src",M));L();N=q=!0;Oa&&eb&&N?B=!0:fb&&(B=!0)}}function na(a){a?(u.css("display","block"),u.stop().animate({opacity:1},{duration:350,easing:"easeOutSine"})):u.stop().animate({opacity:0},{duration:350,easing:"easeOutSine",complete:function(){u.css("display","none")}})}function oa(a, b){e.getJSON((/api\./.test(a)?a+"?":"http://api.soundcloud.com/resolve?url="+a+"&")+"format=json&consumer_key="+ba+"&callback=?",function(d){var g=[],c,i,f;if(d.tracks){i=d.tracks.length;for(f=0;f<i;f++)c={},c.thumbUrl=d.tracks[f].artwork_url?d.tracks[f].artwork_url:"",c.url=d.tracks[f].stream_url+(/\?/.test(d.tracks[f].stream_url)?"&":"?")+"consumer_key="+ba,c.title=d.tracks[f].title,g.push(c);I(b,g)}else if(d.duration)d.permalink_url=a,c={},c.thumbUrl=d.artwork_url?d.artwork_url:"",c.url=d.stream_url+ (/\?/.test(d.stream_url)?"&":"?")+"consumer_key="+ba,c.title=d.title,g.push(c),I(b,g);else if(d.username)/favorites/.test(a)?oa(d.uri+"/favorites",b):oa(d.uri+"/tracks",b);else if(e.isArray(d)){i=d.length;for(f=0;f<i;f++)c={},c.thumbUrl=d[f].artwork_url?d[f].artwork_url:"",c.url=d[f].stream_url+(/\?/.test(d[f].stream_url)?"&":"?")+"consumer_key="+ba,c.title=d[f].title,g.push(c);I(b,g)}}).error(function(){alert("SoundCloud process error!")})}function Pa(a){ka=[];H=[];var c,d=0,g,f=!1;if(pa){la();Qa(); for(d;d<J;d++)c=e(w[d]),c.unbind("click",Ra),c.removeClass("playlistSelected").addClass("playlistNonSelected");pa.css("display","none")}g=e(K.find("ul[id="+a+"]"));g.css("display","block");pa=g;w=[];C=[];$=!1;0<g.find("li").length&&(f=!0);d=g.attr("data-type").toLowerCase();a=g.attr("data-path");if("soundcloud"==d)$=!0,f?I(g):oa(a,g);else if("podcast"==d){$=!0;var i,k,j,d=0,l,m,n=[];f?I(g):b.find(".feedParser").load("feed.php","feedUrl="+a,function(a){var b=null;window.DOMParser?(b=new DOMParser, b=b.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a));e(b).find("item").each(function(){j=e(this);i=j.find("title").text();k=j.find("enclosure").attr("url");l="";j.find("media\\:thumbnail").length>0?j.find("media\\:thumbnail").attr("url")?l=j.find("media\\:thumbnail").attr("url"):g.attr("data-thumb")!=void 0&&(l=g.attr("data-thumb")):g.attr("data-thumb")!=void 0&&(l=g.attr("data-thumb"));m={};m.thumbUrl=l;m.url=k;m.title=i;n.push(m)});I(g,n)})}else"local"== d?(g.filter(function(){C=e(this).find("li[class='playlistItem']");w=C.find("a[class='playlistNonSelected']")}),Sa(C,w)):alert("Invalid playlist data-type!")}function I(a,b){var d=0,c,f;if(b)for(d;d<b.length;d++)c=e('<li class= "playlistItem" data-thumb="'+b[d].thumbUrl+'" data-path="'+b[d].url+'" ></li>').addClass("playlistItem"),f=e('<a class="playlistNonSelected" href="#">'+b[d].title+"</a>").addClass("playlistNonSelected"),c.append(f),a.append(c),C.push(c),w.push(f);else a.find("li[class='playlistItem']").each(function(){c= e(this);f=c.find("a[class='playlistNonSelected']");C.push(c);w.push(f)});Sa(C,w)}function Sa(a,c){J=a.length;var d=0,g,j=!1;g=e(c[0]);Ta&&("01. "==g.html().substring(0,4)?j=!0:"01. "==g.text().substring(0,4)&&(j=!0));for(d;d<J;d++){g=e(c[d]);g.bind("click touchstart MozTouchDown",Ra);g.attr("data-id",d);if(Ta)if(j)H.push(g.html());else{var k=void 0,k=9>d?"0"+(d+1):d+1;h=k+". "+g.html();H.push(h);g.html(h)}else H.push(g.html());g=e(a[d]);ka.push(g.attr("data-path"))}Ua(a);Ua(c);u.css("opacity",0); u.css("display","block");D?(D.reinitialise(),D.scrollToY(0)):(D=K.jScrollPane().data().jsp,K.bind("jsp-initialised",function(){}),K.jScrollPane({verticalDragMinHeight:30,verticalDragMaxHeight:40}));gb?(u.css("opacity",1),u.css("display","block"),b.find(".player_togglePlaylist").find("img").attr("src",O),v=!0):(b.find(".player_togglePlaylist").find("img").attr("src",P),u.css("opacity",0),u.css("display","none"));f||(f=!0,audioPlayerSetupDone());i.setPlaylistItems(J);i.setCounter(0);y();qa=!1}function Ra(a){if(f)return a|| (a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=e(a.currentTarget).attr("data-id"),N=!0,z(),i.processPlaylistRequest(a),y(),!1}function z(){-1!=i.getCounter()&&e(w[i.getCounter()]).removeClass("playlistSelected").addClass("playlistNonSelected")}function Ia(){e(w[i.getCounter()]).removeClass("playlistNonSelected").addClass("playlistSelected")}function hb(a){if(f&&q)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(), a=e(a.currentTarget).attr("class"),"controls_prev"==a?(N=!0,z(),i.advanceHandler(-1,!0),y()):"controls_toggle"==a?(l?(soundManager.pause(s),l=!1,b.find(".controls_toggle").find("img").attr("src",M)):(soundManager.play(s),l=!0,b.find(".controls_toggle").find("img").attr("src",aa)),l?b.find(".controls_toggle").find("img").attr("src",Va):b.find(".controls_toggle").find("img").attr("src",Wa)):"controls_next"==a?(N=!0,z(),i.advanceHandler(1,!0),y()):"player_volume"==a?ca?(k=Xa,L(),ca=!1):(Xa=k,ca=!0,k= 0,L()):"player_loop"==a?(o?(b.find(".player_loop").find("img").attr("src",da),o=!1):(b.find(".player_loop").find("img").attr("src",Q),o=!0),i.setLooping(o)):"player_shuffle"==a?(p?(b.find(".player_shuffle").find("img").attr("src",ea),p=!1):(b.find(".player_shuffle").find("img").attr("src",R),p=!0),i.setRandom(p)):"player_togglePlaylist"==a&&(v?(b.find(".player_togglePlaylist").find("img").attr("src",P),v=!1,na(!1)):(b.find(".player_togglePlaylist").find("img").attr("src",O),v=!0,na(!0))),!1}function ib(a){if(f)return a|| (a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=e(a.currentTarget).attr("class"),"controls_prev"==a?b.find(".controls_prev").find("img").attr("src",jb):"controls_toggle"==a?l?b.find(".controls_toggle").find("img").attr("src",Va):b.find(".controls_toggle").find("img").attr("src",Wa):"controls_next"==a?b.find(".controls_next").find("img").attr("src",kb):"player_volume"==a?0<k?b.find(".player_volume").find("img").attr("src",lb):b.find(".player_volume").find("img").attr("src", mb):"player_loop"==a?o?b.find(".player_loop").find("img").attr("src",da):b.find(".player_loop").find("img").attr("src",Q):"player_shuffle"==a?p?b.find(".player_shuffle").find("img").attr("src",ea):b.find(".player_shuffle").find("img").attr("src",R):"player_togglePlaylist"==a&&(v?b.find(".player_togglePlaylist").find("img").attr("src",P):b.find(".player_togglePlaylist").find("img").attr("src",O)),!1}function nb(a){if(f)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&& a.stopPropagation(),a=e(a.currentTarget).attr("class"),"controls_prev"==a?b.find(".controls_prev").find("img").attr("src",ob):"controls_toggle"==a?l?b.find(".controls_toggle").find("img").attr("src",aa):b.find(".controls_toggle").find("img").attr("src",M):"controls_next"==a?b.find(".controls_next").find("img").attr("src",pb):"player_volume"==a?0<k?b.find(".player_volume").find("img").attr("src",Ba):b.find(".player_volume").find("img").attr("src",Ca):"player_loop"==a?o?b.find(".player_loop").find("img").attr("src", Q):b.find(".player_loop").find("img").attr("src",da):"player_shuffle"==a?p?b.find(".player_shuffle").find("img").attr("src",R):b.find(".player_shuffle").find("img").attr("src",ea):"player_togglePlaylist"==a&&(v?b.find(".player_togglePlaylist").find("img").attr("src",O):b.find(".player_togglePlaylist").find("img").attr("src",P)),!1}function la(){t&&(soundManager.destroySound(s),t=null);ra.html("0:00"+sa);ta.html("0:00");Y.css("width","0px");ua.css("width","0px");q=l=!1}function Ja(){}function Ka(){var a= this.position/1E3,b=this.duration/1E3;if(!isNaN(a)||!isNaN(b))ra.html(Ea(a)+sa),ta.html(Fa(b)),Ya||Y.css("width",a/b*x+"px"),a=this.bytesLoaded/this.bytesTotal,isNaN(a)||ua.css("width",a*x+"px")}function Na(){e.browser.opera&&!ma&&(ma=!0,va&&clearInterval(va),va=setTimeout(function(){soundManager.setPosition(s,10)},1E3))}function La(){z();i.advanceHandler(1,!0);y()}function Ma(){}function Qa(){j&&S&&j.deactivate();ra.html("0:00"+sa);ta.html("0:00");ga.html("Artist Name - Artist Title");Y.css("width", "0px");ua.css("width","0px");K.css("top","0px");0<Za.children().size()&&Za.children().remove()}function Ea(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function Fa(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function Ua(a){e(a).each(function(){e(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none", "user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}var f=!1;e("body");e(window);var m=e(document),b=e($a);b.find(".componentPlaylist");var K=b.find(".playlist_inner"),u=b.find(".playlistHolder");b.find(".playerHolder");b.find(".player_mediaTime");var ra=b.find(".player_mediaTime_current"),ta=b.find(".player_mediaTime_total"),bb=b.find(".player_mediaName_Mask"),ga=b.find(".player_mediaName"),Za=b.find(".player_thumb"),cb=b.find(".player_controls"),ob=c.buttonsUrl.prev, jb=c.buttonsUrl.prevOn,pb=c.buttonsUrl.next,kb=c.buttonsUrl.nextOn,M=c.buttonsUrl.play,Wa=c.buttonsUrl.playOn,aa=c.buttonsUrl.pause,Va=c.buttonsUrl.pauseOn,da=c.buttonsUrl.loop,Q=c.buttonsUrl.loopOn,Ba=c.buttonsUrl.volume,lb=c.buttonsUrl.volumeOn,Ca=c.buttonsUrl.mute,mb=c.buttonsUrl.muteOn,ea=c.buttonsUrl.shuffle,R=c.buttonsUrl.shuffleOn,P=c.buttonsUrl.playlist,O=c.buttonsUrl.playlistOn,ma=!1,va;K.children("ul").each(function(){e(this).css("display","none")});var B=c.autoPlay,eb=B,fb=c.autoPlayAfterFirst, Oa=!1,fa=navigator.userAgent;if(-1<fa.indexOf("iPhone")||-1<fa.indexOf("iPod")||-1<fa.indexOf("iPad"))B=!1,Oa=!0;fa.indexOf("Android");var ba=c.soundcloudApiKey,qb=c.activePlaylist,pa=null,$=!1,qa=!1,N=!1,s=ab,t,q=!1,Z="",l=!1,gb=c.autoOpenPlaylist,v=!1,S=c.useSongNameScroll,o=c.loopingOn,p=c.randomPlay,Ta=c.addNumbersInPlaylist;o&&b.find(".player_loop").find("img").attr("src",Q);p&&b.find(".player_shuffle").find("img").attr("src",R);var j;xa();var i=new apPlaylistManager;i.init(o,p);var sa=c.mediaTimeSeparator, db=c.seekTooltipSeparator,A,Ya=!1,n=b.find(".player_progress"),Ga=b.find(".progress_bg"),ua=b.find(".load_level"),Y=b.find(".progress_level"),x=Ga.width();n.css("cursor","pointer");n.bind("mousedown touchstart MozTouchDown",function(){if(f&&!ia)return seekbarDown=!0,m.bind("mousemove",X),m.bind("mouseup touchend MozTouchUp",Ha),n.bind("mouseup",X),!1});var G=b.find(".player_progress_tooltip"),ja=b.find(".player_progress_tooltip_value");n.bind("mouseover",function(){q&&(G.css("display","block"),n.bind("mousemove", Da),n.bind("mouseout",W),m.bind("mouseout",W))});G.css("left",parseInt(n.css("left"),10)+"px");var Xa,ca=!1,k=c.defaultVolume;0>k?k=0:1<k&&(k=1);var ia=!1,r=b.find(".volume_seekbar"),U=b.find(".volume_bg"),Aa=b.find(".volume_level"),F=U.width();Aa.css("width",k*F+"px");r.css("cursor","pointer");r.bind("mousedown touchstart MozTouchDown",function(){if(f&&!Ya)return ia=!0,m.bind("mousemove",V),m.bind("mouseup touchend MozTouchUp",za),r.bind("mouseup",V),ca=!1});var E=b.find(".player_volume_tooltip"), ha=b.find(".player_volume_tooltip_value");r.bind("mouseover",function(){q&&(E.css("display","block"),r.bind("mousemove",ya),r.bind("mouseout",T),m.bind("mouseout",T))});E.css("left",parseInt(r.css("left"),10)+"px");var w=[],C=[],ka=[],H=[],wa=[],J,D;soundManager.onready(function(){wa=[b.find(".controls_next"),b.find(".controls_prev"),b.find(".controls_toggle"),b.find(".player_volume"),b.find(".player_loop"),b.find(".player_shuffle"),b.find(".player_togglePlaylist")];var a,c=wa.length,d=0;for(d;d< c;d++)a=e(wa[d]),a.css("cursor","pointer"),a.bind("mouseover",ib),a.bind("mouseout",nb),a.bind("click touchstart MozTouchDown",hb);Pa(qb)});soundManager.ontimeout(function(a){alert("SM2 failed to start. Flash missing, blocked or security error? Status: "+a.error.type)});e.html5audio.playAudio=function(){f&&(!l&&q)&&(soundManager.play(s),b.find(".controls_toggle").find("img").attr("src",aa),q=l=!0)};e.html5audio.stopAudio=function(){f&&(l&&q)&&(soundManager.pause(s),b.find(".controls_toggle").find("img").attr("src", M),l=!1)};e.html5audio.nextAudio=function(){f&&(z(),i.advanceHandler(1,!0),y())};e.html5audio.previousAudio=function(){f&&(z(),i.advanceHandler(-1,!0),y())};e.html5audio.loadAudio=function(a){f&&(0>a?a=0:a>J-1&&(a=J-1),z(),i.processPlaylistRequest(a),y())};e.html5audio.togglePlaylistState=function(){f&&(v?(v=!1,b.find(".player_togglePlaylist").find("img").attr("src",P)):(v=!0,b.find(".player_togglePlaylist").find("img").attr("src",O)),na(v))};e.html5audio.toggleShuffle=function(){f&&(p?(b.find(".player_shuffle").find("img").attr("src", ea),p=!1):(b.find(".player_shuffle").find("img").attr("src",R),p=!0),i.setRandom(p))};e.html5audio.toggleLoop=function(){f&&(o?(b.find(".player_loop").find("img").attr("src",da),o=!1):(b.find(".player_loop").find("img").attr("src",Q),o=!0),i.setLooping(o))};e.html5audio.setVolume=function(a){f&&q&&(0>a?a=0:1<a&&(a=1),k=a,L())};e.html5audio.inputPlaylist=function(a){f&&!qa&&(qa=!0,Pa(a))};e.html5audio.destroyAudio=function(){f&&(la(),Qa(),b.find(".controls_toggle").find("img").attr("src",M),z())}; e.html5audio.reinitScroll=function(){if(f&&(D&&(D.reinitialise(),D.scrollToY(0)),j&&S)){j.deactivate();j=null;xa();var a=i.getCounter();j.input(H[a]);j.activate()}}}})(jQuery); (function(e){jQuery.browser.mobile=/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iPad|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))})(navigator.userAgent|| navigator.vendor||window.opera);